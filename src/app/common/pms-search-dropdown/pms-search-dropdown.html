<div class="relative w-full">
  <!-- Selected employees as chips -->
  <div *ngIf="multiSelect && selectedItems.length > 0" class="flex flex-wrap gap-2 mb-2">
    <div
      *ngFor="let emp of selectedItems"
      class="flex items-center gap-1 bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-sm"
    >
      {{ emp[searchKey] }}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        (click)="removeItem(emp)"
        class="h-4 w-4 cursor-pointer hover:text-blue-900"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </div>
  </div>

  <!-- Input with dropdown icon -->
  <div class="relative">
    <input
      type="text"
      [(ngModel)]="searchedValue"
      (focus)="openDropdown()"
      (input)="displaySearched()"
      [placeholder]="placeholder"
      class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10"
    />

    <!-- Dropdown arrow -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      (click)="toggleDropdown()"
      class="h-5 w-5 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </div>

  <!-- Dropdown list -->
  <ul
    *ngIf="dropdownOpen && filteredList.length > 0"
    class="absolute z-50 w-full bg-white border border-gray-300 rounded-md shadow-md max-h-48 overflow-auto"
  >
    <!-- Select All -->
    <li
      *ngIf="multiSelect"
      (click)="toggleSelectAll()"
      class="px-4 py-2 font-semibold bg-gray-100 hover:bg-gray-200 cursor-pointer flex items-center gap-2"
    >
      <input type="checkbox" [checked]="allSelected()" />
      Select All
    </li>

    <!-- Filtered employees -->
    <li
      *ngFor="let item of filteredList; trackBy: trackByFn"
      (click)="selectItem(item)"
      class="px-4 py-2 hover:bg-blue-100 cursor-pointer flex items-center gap-2"
    >
      <ng-container *ngIf="multiSelect">
        <input type="checkbox" [checked]="isSelected(item)" />
      </ng-container>
      {{ item[searchKey] }}
    </li>
  </ul>
</div>

<!-- Overlay -->
<div
  class="fixed inset-0 bg-black bg-opacity-40 z-40"
  *ngIf="isOpen"
  (click)="closeDrawer()"
></div>

<!-- Side Drawer -->
<div
  class="fixed top-0 right-0 w-full sm:w-1/3 h-full bg-white shadow-lg z-50 transform transition-transform duration-300"
  [class.translate-x-full]="!isOpen"
>
  <div class="p-6 flex flex-col h-full overflow-y-auto">
    <!-- Header -->
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold">Create Cycle</h2>
      <button (click)="closeDrawer()" class="text-gray-500 hover:text-gray-700">âœ–</button>
    </div>

    <!-- Form -->
    <form (ngSubmit)="submitForm()" class="space-y-4">
      <div>
        <label class="block font-medium mb-1">Name</label>
        <input
          type="text"
          [(ngModel)]="formData.name"
          name="name"
          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label class="block font-medium mb-1">Start Date</label>
        <input
          type="date"
          [(ngModel)]="formData.startDate"
          name="startDate"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
        />
      </div>

      <div>
        <label class="block font-medium mb-1">End Date</label>
        <input
          type="date"
          [(ngModel)]="formData.endDate"
          name="endDate"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
        />
      </div>

      <div>
        <label class="block font-medium mb-1">Description</label>
        <textarea
          [(ngModel)]="formData.description"
          name="description"
          rows="2"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
        ></textarea>
      </div>

      <div>
        <label class="block font-medium mb-1">Comments</label>
        <textarea
          [(ngModel)]="formData.comments"
          name="comments"
          rows="2"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
        ></textarea>
      </div>

      <div>
        <label class="block font-medium mb-1">Eligible Employees</label>
        <app-pms-search-dropdown
          [list]="employeeList"
          [searchKey]="'name'"
          placeholder="Search employees"
          (itemSelected)="onEmployeesSelected($event)"
        ></app-pms-search-dropdown>
      </div>

      <div>
        <label class="block font-medium mb-1">Cycle Type</label>
        <select
          [(ngModel)]="formData.cycleType"
          name="cycleType"
          class="w-full border border-gray-300 rounded-md px-3 py-2"
        >
          <option *ngFor="let type of cycleTypes" [value]="type">
            {{ type }}
          </option>
        </select>
      </div>

      <div class="flex justify-end mt-4">
        <button
          type="submit"
          class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"
        >
          Save
        </button>
      </div>
    </form>
  </div>
</div>